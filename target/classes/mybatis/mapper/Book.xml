<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="mybatis.mapper.Book">      
    <insert id="addBook" parameterType="Test" useGeneratedKeys="true" keyProperty="id"> 
        INSERT INTO BBOOK_TEMPORARY (BBOOK_NAME,AAUTHOR_ID,BBOOK_TYPE,BBOOK_SYNOPSIS,BBOOK_FILE,CCREATE_TIME,MMODIFY_TIME) 
        VALUES(#{bookName},#{authorId},#{bookType},#{bookSynopsis},#{bookFile},#{createFile},#{modifyTime}) 
    </insert>
    <resultMap id="BookTemporary" type="com.comverse.timesheet.web.bean.book.BookTemporary">
	     <id column="IID" property="id" />
	     <result column="BBOOK_NAME" property="bookName" />
	     <result column="AAUTHOR_ID" property="authorId" />
	     <result column="BBOOK_TYPE" property="bookType" />
	     <result column="BBOOK_SYNOPSIS" property="bookSynopsis" />
	     <result column="BBOOK_FILE" property="bookFile" />
	     <result column="CCREATE_TIME" property="createFile" />
	     <result column="MMODIFY_TIME" property="modifyTime" />
	</resultMap>
    <select id="selectBookByNull" resultMap="BookTemporary">
        SELECT * FROM BBOOK_TEMPORARY
    </select>
    <select id="selectBookById" resultMap="BookTemporary">
        SELECT * FROM BBOOK_TEMPORARY WHERE IID=#{id}
    </select>
    <update id="updateBookTemporary"  parameterType="Test" >
    	UPDATE BBOOK_TEMPORARY
    	<set><if test="bookName!=null">
   			BBOOK_NAME=#{bookName}
   		</if>
   		<if test="bookType!=0">
   			, BBOOK_TYPE=#{bookType}
   		</if> </set>
   		
   		<where>IID=#{id}</where>
    </update>
</mapper>  